<!doctype html>
{% load static %}
<html class="no-js" lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>::Timetracker::Projects </title>
    <link rel="icon" href="favicon.ico" type="image/x-icon"> <!-- Favicon-->
    
    <!-- project css file  -->
    <link rel="stylesheet" href="{% static 'assets/css/timetracker.style.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
</head>
<body>
    <div id="timetracker-layout" class="theme-mist">
        <!-- main body area -->
        <div class="main px-lg-4 px-md-4">
            <!-- Body: Header -->
            <div class="header">
            <!-- Body: Body -->
            <div class="body d-flex py-lg-3 py-md-2">
                <div class="container-xxl">
                    <div class="row align-items-center">
                        <div class="border-0 mb-4">
                            <div class="card-header p-0 no-bg bg-transparent align-items-center px-0 d-flex border-bottom flex-wrap">
                                <h3 class="h4 py-3 mb-0">Projects</h3>
                                <div class="d-flex py-2 project-tab flex-wrap w-sm-100 ms-auto">
                                    <button type="button" class="btn btn-dark w-sm-100 mb-2 mb-md-0" data-bs-toggle="modal" data-bs-target="#createproject"><i class="icofont-plus-circle me-2 fs-6"></i>Project</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="createproject" tabindex="-1"  aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="body d-flex py-lg-3 py-md-2">
                <div class="container-xxl">

                    <div class="row modal-details">
                        <div class="col-sm-5">
                            <div class="pop-main-content">
                            <h2 id="projectName">Project name</h2>
                            <h2 id="projectDeadline" class="m-0">Deadline</h2>
                            <div class="pop-btn">
                                <button type="button" class="btn btn-dark btn-set-task w-sm-100" data-bs-toggle="modal" data-bs-target="#createtask"><i class="me-2 fs-6"></i>Update Memo</button>
                            </div>
                        </div>
                        </div>
                        <div class="col-sm-7">
                         <div class="pop-main-content">

                            <div class="row">
                                <div class="col-md-6">
                                    <h2 id="projectTotalHours">Total Hours</h2>
                                    <h2 id="projectRemaining" class="m-0">Worked/Remaining</h2>
                            
                                </div>
                                <div class="col-md-6">
                                    <div class="post-img">
                                        <img src="" alt="screenshot">
                                        <input type="number" name="projectID" id="projectID" value="">
                                        <div class="form-check form-switch">
                                          <input class="form-check-input" type="checkbox" role="switch" id="projectSSState" onchange="handleToggleScreenShot(event)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                         </div>
                        </div>


                    </div>


                    <div class="row align-items-center">
                        <div class="border-0 mb-4">
                        </div>
                    </div> <!-- Row end  -->
                    <div class="row clearfix g-3">
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-body">
                                <table id="myProjectTable" class="table table-hover align-middle mb-0" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Time</th>
                                            <th>Project Name</th>
                                            <th>Hours Worked</th>
                                            <th>Deadline</th>
                                        </tr>
                                    </thead>
                                    {% for i in all_projects %}
                                    <tbody>
                                        <tr onclick='handlePopupProjectRow("{{i.id}}", "{{i.name}}", "{{i.deadline.date}}", "{{i.screensort_switch}}")'>
                                           <td>
                                               <span class="fw-bold ms-1">{{i.received_at.date}}</span>
                                           </td>
                                           <td>
                                               <a href="">{{i.name}}</a>
                                           </td>
                                           <td>
                                                <a href="task.html">25-Hours</a>
                                           </td>
                                           <td>
                                                <a href="mailto:">{{i.deadline.date}}</a>
                                           </td>
                                        </tr>

                                    </tbody>
                                    {% endfor %}
                                </table>
                            </div>
                        </div>
                    </div>
                    </div><!-- Row End -->
                </div>
            </div>
                    </div>

<!--                    <div class="modal-footer">-->
<!--                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Done</button>-->
<!--                        <button type="button" class="btn btn-primary">Create</button>-->
<!--                    </div>-->
                </div>
                </div>
            </div>
        </div>   

    </div> 

    <!-- Jquery Core Js -->
    <script src="{% static 'assets/bundles/libscripts.bundle.js' %}"></script>

    <!-- Jquery Page Js -->
    {% comment %} <script src="{% static 'js/template.js' %}"></script> {% endcomment %}
    <script>
        function handlePopupProjectRow(pId, pName, pDeadline, pScreenshotVal){
            console.log("pname : ", pName, ", pdeadline : ", pDeadline, ", ssval : ",  pScreenshotVal);
            let projectTitle = document.getElementById('projectName');
            let projectDeadline = document.getElementById('projectDeadline');
            let ssSwitchObj = document.getElementById('projectSSState');
            let projectIdNode = document.getElementById('projectID');

            projectTitle.innerHTML = pName;
            projectDeadline.innerHTML = pDeadline;
            projectIdNode.value = pId;
            if(pScreenshotVal === "False") {
                  ssSwitchObj.checked = false;
            }else if(pScreenshotVal === 'True'){
                ssSwitchObj.checked = true;
            }
        }
        function handleToggleScreenShot(event){
            let projectIdNode = document.getElementById('projectID');
            console.log("handling toggle activate screenshot...", event, ", --> ", projectIdNode.value);
            const apiResponse = fetch()
        }
    </script>
</body>
</html>